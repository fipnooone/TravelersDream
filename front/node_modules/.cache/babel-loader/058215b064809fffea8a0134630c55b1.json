{"ast":null,"code":"var _jsxFileName = \"D:\\\\Files\\\\Projects\\\\- WEB\\\\TravelersDream\\\\front\\\\src\\\\Components\\\\Authorization.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { request } from './requests';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Authorization extends Component {\n  constructor(props) {\n    super(props);\n\n    this.changeText = text => {\n      this.setState({\n        loginText: text\n      });\n    };\n\n    this.setAuth = b => {\n      this.setState({\n        auth: b\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      let data = {\n        login: document.getElementById(\"LoginInput\").value,\n        password: document.getElementById(\"PasswordInput\").value\n      };\n\n      if (data.login !== \"\" && data.password !== \"\" && data.login.length <= 255 && data.password.length <= 255) {\n        let formData = new FormData();\n        formData.append(\"method\", \"login\");\n        formData.append(\"data\", JSON.stringify({\n          \"login\": data.login,\n          \"password\": data.password\n        }));\n        axios.post(\"http://dream\", formData).then(res => {\n          if (res.data.success) {\n            this.changeText(\"\");\n            this.setAuth(true);\n            Cookies.set(\"data\", JSON.stringify({\n              token: res.data.token\n            }), {\n              expires: new Date(new Date().getTime() + 15778476000)\n            });\n            (this.props.history || this.props.props.history).push({\n              pathname: '/lk',\n              state: {\n                auth: this.state.auth\n              }\n            });\n          } else {\n            this.changeText(res.data.message);\n          }\n        }).catch(err => {\n          this.changeText(\"Произошла ошибка при подключении к серверу\");\n        });\n      }\n    };\n\n    this.handleRegister = async e => {\n      // на костылях\n      e.preventDefault();\n      let data = {\n        fio: document.getElementById(\"Name\").value,\n        login: document.getElementById(\"Login\").value,\n        password: document.getElementById(\"Password\").value\n      };\n\n      if (data.fio != '' && (data.login == '' || data.password == '')) {\n        this.setState({\n          regData: {\n            name: data.fio\n          }\n        });\n        request(\"isNewUserByFio\", {\n          fio: data.fio\n        }).then(res => {\n          if (res.success) {\n            document.getElementById(\"Name\").style.display = \"none\";\n            document.getElementById(\"Login\").style.display = \"block\";\n            document.getElementById(\"Password\").style.display = \"block\";\n          }\n        });\n      } else if (data.login !== '' && data.password !== '') {\n        request(\"register\", {\n          fio: this.state.regData.name,\n          login: data.login,\n          password: data.password\n        }).then(res => {\n          if (res.success) {\n            this.setAuth(true);\n            Cookies.set(\"data\", JSON.stringify({\n              token: res.data.token\n            }), {\n              expires: new Date(new Date().getTime() + 15778476000)\n            });\n            (this.props.history || this.props.props.history).push({\n              pathname: '/lk',\n              state: {\n                auth: this.state.auth\n              }\n            });\n          } else {\n            this.changeText(res.data.message);\n            document.getElementById(\"Name\").style.display = \"block\";\n            document.getElementById(\"Login\").style.display = \"none\";\n            document.getElementById(\"Password\").style.display = \"none\";\n          }\n        });\n      }\n    };\n\n    this.state = {\n      auth: false,\n      loginText: \"\",\n      currAction: true,\n      regData: {\n        name: \"\"\n      }\n    };\n  }\n\n  render() {\n    let authBlock;\n\n    if (this.state.currAction) {\n      authBlock = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"LoginInput\",\n          type: \"email\",\n          placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\",\n          onChange: this.handleAdd,\n          maxLength: \"255\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"PasswordInput\",\n          type: \"password\",\n          placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          onChange: this.handleAdd,\n          maxLength: \"255\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"Submit\",\n          onClick: this.handleSubmit,\n          children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }, this);\n    } else {\n      authBlock = /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"regBlock\",\n        className: \"login-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"Name\",\n          type: \"text\",\n          placeholder: \"\\u0424\\u0418\\u041E\",\n          maxLength: \"255\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"Login\",\n          type: \"email\",\n          placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\",\n          maxLength: \"255\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"Password\",\n          type: \"password\",\n          placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          maxLength: \"255\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.handleRegister,\n          children: \"\\u0414\\u0430\\u043B\\u0435\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"auth-header\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"main-ul\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            id: \"Logo\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"Sources/images/logo.png\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            id: \"Auth\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"button button-login\",\n              onClick: () => this.setState({\n                currAction: true\n              }),\n              children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"button button-register\",\n              onClick: () => this.setState({\n                currAction: false\n              }),\n              children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selection-shadow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"Authorization\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Form\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"64\",\n            height: \"78\",\n            viewBox: \"0 0 64 78\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M32 0H52C58.6274 0 64 5.37258 64 12V51.76C64 55.9458 61.8189 59.8291 58.2444 62.0073L38.2444 74.1948C34.4095 76.5317 29.5905 76.5317 25.7556 74.1948L5.75557 62.0073C2.18114 59.8291 0 55.9458 0 51.76V12C0 5.37258 5.37258 0 12 0H32Z\",\n              fill: \"#2c2c34\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M31.9963 37.7037C26.9645 37.7037 22.6665 38.4971 22.6665 41.6704C22.6665 44.8449 26.9377 45.6662 31.9963 45.6662C37.0282 45.6662 41.3262 44.8741 41.3262 41.6996C41.3262 38.5251 37.0562 37.7037 31.9963 37.7037Z\",\n              fill: \"#FAFAFA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              opacity: \"0.7\",\n              d: \"M31.9963 34.681C35.4239 34.681 38.1703 31.9335 38.1703 28.507C38.1703 25.0805 35.4239 22.333 31.9963 22.333C28.5698 22.333 25.8223 25.0805 25.8223 28.507C25.8223 31.9335 28.5698 34.681 31.9963 34.681Z\",\n              fill: \"#FAFAFA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"TextLogin\",\n            children: this.state.loginText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this), authBlock]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\n;\nexport default Authorization;","map":{"version":3,"sources":["D:/Files/Projects/- WEB/TravelersDream/front/src/Components/Authorization.js"],"names":["React","Component","axios","Cookies","request","Authorization","constructor","props","changeText","text","setState","loginText","setAuth","b","auth","handleSubmit","e","preventDefault","data","login","document","getElementById","value","password","length","formData","FormData","append","JSON","stringify","post","then","res","success","set","token","expires","Date","getTime","history","push","pathname","state","message","catch","err","handleRegister","fio","regData","name","style","display","currAction","render","authBlock","handleAdd"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {request} from './requests';\r\n\r\nclass Authorization extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            auth: false,\r\n            loginText: \"\",\r\n            currAction: true,\r\n            regData: {\r\n                name: \"\"\r\n            }\r\n        };\r\n    };\r\n    changeText = (text) => { this.setState({ loginText: text }) };\r\n    setAuth = (b) => { this.setState({ auth: b }) };\r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        let data = {\r\n            login: document.getElementById(\"LoginInput\").value,\r\n            password: document.getElementById(\"PasswordInput\").value\r\n        }\r\n        if ((data.login !== \"\") && (data.password !== \"\") && (data.login.length <= 255) && (data.password.length  <= 255)) {\r\n            let formData = new FormData();\r\n            formData.append(\"method\", \"login\");\r\n            formData.append(\"data\", JSON.stringify({\r\n                \"login\": data.login,\r\n                \"password\": data.password\r\n            }));\r\n            axios.post(\"http://dream\", formData)\r\n            .then(res => {\r\n                if (res.data.success) {\r\n                    this.changeText(\"\");\r\n                    this.setAuth(true);\r\n                    Cookies.set(\"data\", JSON.stringify({\r\n                        token: res.data.token\r\n                    }),{\r\n                        expires: new Date(new Date().getTime() + 15778476000)\r\n                    });\r\n                    (this.props.history || this.props.props.history).push({\r\n                        pathname: '/lk',\r\n                        state: {\r\n                            auth: this.state.auth\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    this.changeText(res.data.message);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                this.changeText(\"Произошла ошибка при подключении к серверу\");\r\n            });\r\n        }\r\n    };\r\n    handleRegister = async e => { // на костылях\r\n        e.preventDefault();\r\n        let data = {\r\n            fio: document.getElementById(\"Name\").value,\r\n            login: document.getElementById(\"Login\").value,\r\n            password: document.getElementById(\"Password\").value\r\n        }\r\n        if (data.fio != '' && (data.login == '' || data.password == '')) {\r\n            this.setState({regData: {name: data.fio}});\r\n            request(\"isNewUserByFio\", {fio: data.fio}).then(res => {\r\n                if (res.success) {\r\n                    document.getElementById(\"Name\").style.display = \"none\";\r\n                    document.getElementById(\"Login\").style.display = \"block\";\r\n                    document.getElementById(\"Password\").style.display = \"block\";\r\n                }\r\n            });\r\n        } else if (data.login !== '' && data.password !== '') {\r\n            request(\"register\", {fio: this.state.regData.name, login: data.login, password: data.password}).then(res => {\r\n                if (res.success) {\r\n                    this.setAuth(true);\r\n                    Cookies.set(\"data\", JSON.stringify({\r\n                        token: res.data.token\r\n                    }),{\r\n                        expires: new Date(new Date().getTime() + 15778476000)\r\n                    });\r\n                    (this.props.history || this.props.props.history).push({\r\n                        pathname: '/lk',\r\n                        state: {\r\n                            auth: this.state.auth\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.changeText(res.data.message);\r\n                    document.getElementById(\"Name\").style.display = \"block\";\r\n                    document.getElementById(\"Login\").style.display = \"none\";\r\n                    document.getElementById(\"Password\").style.display = \"none\";\r\n                }\r\n            });\r\n        }\r\n    };\r\n    render() {\r\n        let authBlock;\r\n        if (this.state.currAction) {\r\n            authBlock =\r\n            <div className=\"login-data\">\r\n                <input id=\"LoginInput\" type=\"email\" placeholder=\"Логин\" onChange={this.handleAdd} maxLength=\"255\"></input>\r\n                <input id=\"PasswordInput\" type=\"password\" placeholder=\"Пароль\" onChange={this.handleAdd} maxLength=\"255\"></input>\r\n                <button id=\"Submit\" onClick={this.handleSubmit}>Войти</button>\r\n            </div>\r\n        } else {\r\n            authBlock =\r\n            <div id=\"regBlock\" className=\"login-data\">\r\n                <input id=\"Name\" type=\"text\" placeholder=\"ФИО\" maxLength=\"255\"></input>\r\n                <input id=\"Login\" type=\"email\" placeholder=\"Логин\" maxLength=\"255\"></input>\r\n                <input id=\"Password\" type=\"password\" placeholder=\"Пароль\" maxLength=\"255\"></input>\r\n                <button onClick={ this.handleRegister}>Далее</button>\r\n            </div>\r\n        }\r\n        return (\r\n            <>\r\n                <header className=\"auth-header\">\r\n                    <ul className=\"main-ul\">\r\n                        <li id=\"Logo\"><img src=\"Sources/images/logo.png\" alt=\"\"/></li>\r\n                        <li id=\"Auth\">\r\n                            <a className=\"button button-login\" onClick={() => this.setState({ currAction: true }) }>Войти</a>\r\n                            <a className=\"button button-register\" onClick={() => this.setState({ currAction: false }) }>Регистрация</a>\r\n                            <div className=\"selection-shadow\"></div>\r\n                        </li>\r\n                    </ul>\r\n                </header>\r\n                <div id=\"Authorization\">\r\n                    <div className=\"Form\">\r\n                        <svg width=\"64\" height=\"78\" viewBox=\"0 0 64 78\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M32 0H52C58.6274 0 64 5.37258 64 12V51.76C64 55.9458 61.8189 59.8291 58.2444 62.0073L38.2444 74.1948C34.4095 76.5317 29.5905 76.5317 25.7556 74.1948L5.75557 62.0073C2.18114 59.8291 0 55.9458 0 51.76V12C0 5.37258 5.37258 0 12 0H32Z\" fill=\"#2c2c34\"></path>\r\n                            <path d=\"M31.9963 37.7037C26.9645 37.7037 22.6665 38.4971 22.6665 41.6704C22.6665 44.8449 26.9377 45.6662 31.9963 45.6662C37.0282 45.6662 41.3262 44.8741 41.3262 41.6996C41.3262 38.5251 37.0562 37.7037 31.9963 37.7037Z\" fill=\"#FAFAFA\"></path>\r\n                            <path opacity=\"0.7\" d=\"M31.9963 34.681C35.4239 34.681 38.1703 31.9335 38.1703 28.507C38.1703 25.0805 35.4239 22.333 31.9963 22.333C28.5698 22.333 25.8223 25.0805 25.8223 28.507C25.8223 31.9335 28.5698 34.681 31.9963 34.681Z\" fill=\"#FAFAFA\"></path>\r\n                        </svg>\r\n                        <p id=\"TextLogin\">{this.state.loginText}</p>\r\n                        {authBlock}\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    };\r\n}; \r\n\r\nexport default Authorization;"]},"metadata":{},"sourceType":"module"}