{"ast":null,"code":"import _regeneratorRuntime from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import Cookies from'js-cookie';import{request}from'./requests';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Authorization=/*#__PURE__*/function(_Component){_inherits(Authorization,_Component);var _super=_createSuper(Authorization);function Authorization(props){var _this;_classCallCheck(this,Authorization);_this=_super.call(this,props);_this.changeText=function(text){_this.setState({loginText:text});};_this.setAuth=function(b){_this.setState({auth:b});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data,formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();data={login:document.getElementById(\"LoginInput\").value,password:document.getElementById(\"PasswordInput\").value};if(data.login!==\"\"&&data.password!==\"\"&&data.login.length<=255&&data.password.length<=255){formData=new FormData();formData.append(\"method\",\"login\");formData.append(\"data\",JSON.stringify({\"login\":data.login,\"password\":data.password}));axios.post(\"http://dream\",formData).then(function(res){if(res.data.success){_this.changeText(\"\");_this.setAuth(true);Cookies.set(\"data\",JSON.stringify({token:res.data.token}),{expires:new Date(new Date().getTime()+15778476000)});(_this.props.history||_this.props.props.history).push({pathname:'/lk',state:{auth:_this.state.auth}});}else{_this.changeText(res.data.message);}}).catch(function(err){_this.changeText(\"Произошла ошибка при подключении к серверу\");});}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleRegister=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// на костылях\ne.preventDefault();data={fio:document.getElementById(\"Name\").value,login:document.getElementById(\"Login\").value,password:document.getElementById(\"Password\").value};if(data.fio!==''&&(data.login===''||data.password==='')){_this.setState({regData:{name:data.fio}});request(\"isNewUserByFio\",{fio:data.fio}).then(function(res){if(res.success){document.getElementById(\"Name\").style.display=\"none\";document.getElementById(\"Login\").style.display=\"block\";document.getElementById(\"Password\").style.display=\"block\";}});}else if(data.login!==''&&data.password!==''){request(\"register\",{fio:_this.state.regData.name,login:data.login,password:data.password}).then(function(res){if(res.success){_this.setAuth(true);Cookies.set(\"data\",JSON.stringify({token:res.data.token}),{expires:new Date(new Date().getTime()+15778476000)});(_this.props.history||_this.props.props.history).push({pathname:'/lk',state:{auth:_this.state.auth}});}else{_this.changeText(res.data.message);document.getElementById(\"Name\").style.display=\"block\";document.getElementById(\"Login\").style.display=\"none\";document.getElementById(\"Password\").style.display=\"none\";}});}case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.state={auth:false,loginText:\"\",currAction:true,regData:{name:\"\"}};return _this;}_createClass(Authorization,[{key:\"render\",value:function render(){var _this2=this;var authBlock;if(this.state.currAction){authBlock=/*#__PURE__*/_jsxs(\"div\",{className:\"login-data\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"LoginInput\",type:\"email\",placeholder:\"\\u041B\\u043E\\u0433\\u0438\\u043D\",onChange:this.handleAdd,maxLength:\"255\"}),/*#__PURE__*/_jsx(\"input\",{id:\"PasswordInput\",type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",onChange:this.handleAdd,maxLength:\"255\"}),/*#__PURE__*/_jsx(\"button\",{id:\"Submit\",onClick:this.handleSubmit,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]});}else{authBlock=/*#__PURE__*/_jsxs(\"div\",{id:\"regBlock\",className:\"login-data\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"Name\",type:\"text\",placeholder:\"\\u0424\\u0418\\u041E\",maxLength:\"255\"}),/*#__PURE__*/_jsx(\"input\",{id:\"Login\",type:\"email\",placeholder:\"\\u041B\\u043E\\u0433\\u0438\\u043D\",maxLength:\"255\"}),/*#__PURE__*/_jsx(\"input\",{id:\"Password\",type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",maxLength:\"255\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleRegister,children:\"\\u0414\\u0430\\u043B\\u0435\\u0435\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{className:\"auth-header\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"main-ul\",children:[/*#__PURE__*/_jsx(\"li\",{id:\"Logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"Sources/images/logo.png\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"li\",{id:\"Auth\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"button button-login\",onClick:function onClick(){return _this2.setState({currAction:true});},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{className:\"button button-register\",onClick:function onClick(){return _this2.setState({currAction:false});},children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"selection-shadow\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"Authorization\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Form\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"64\",height:\"78\",viewBox:\"0 0 64 78\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M32 0H52C58.6274 0 64 5.37258 64 12V51.76C64 55.9458 61.8189 59.8291 58.2444 62.0073L38.2444 74.1948C34.4095 76.5317 29.5905 76.5317 25.7556 74.1948L5.75557 62.0073C2.18114 59.8291 0 55.9458 0 51.76V12C0 5.37258 5.37258 0 12 0H32Z\",fill:\"#2c2c34\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M31.9963 37.7037C26.9645 37.7037 22.6665 38.4971 22.6665 41.6704C22.6665 44.8449 26.9377 45.6662 31.9963 45.6662C37.0282 45.6662 41.3262 44.8741 41.3262 41.6996C41.3262 38.5251 37.0562 37.7037 31.9963 37.7037Z\",fill:\"#FAFAFA\"}),/*#__PURE__*/_jsx(\"path\",{opacity:\"0.7\",d:\"M31.9963 34.681C35.4239 34.681 38.1703 31.9335 38.1703 28.507C38.1703 25.0805 35.4239 22.333 31.9963 22.333C28.5698 22.333 25.8223 25.0805 25.8223 28.507C25.8223 31.9335 28.5698 34.681 31.9963 34.681Z\",fill:\"#FAFAFA\"})]}),/*#__PURE__*/_jsx(\"p\",{id:\"TextLogin\",children:this.state.loginText}),authBlock]})})]});}}]);return Authorization;}(Component);;export default Authorization;","map":{"version":3,"sources":["D:/Files/Projects/- WEB/TravelersDream/front/src/Components/Authorization.js"],"names":["React","Component","axios","Cookies","request","Authorization","props","changeText","text","setState","loginText","setAuth","b","auth","handleSubmit","e","preventDefault","data","login","document","getElementById","value","password","length","formData","FormData","append","JSON","stringify","post","then","res","success","set","token","expires","Date","getTime","history","push","pathname","state","message","catch","err","handleRegister","fio","regData","name","style","display","currAction","authBlock","handleAdd"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {request} from './requests';\r\n\r\nclass Authorization extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            auth: false,\r\n            loginText: \"\",\r\n            currAction: true,\r\n            regData: {\r\n                name: \"\"\r\n            }\r\n        };\r\n    };\r\n    changeText = (text) => { this.setState({ loginText: text }) };\r\n    setAuth = (b) => { this.setState({ auth: b }) };\r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        let data = {\r\n            login: document.getElementById(\"LoginInput\").value,\r\n            password: document.getElementById(\"PasswordInput\").value\r\n        }\r\n        if ((data.login !== \"\") && (data.password !== \"\") && (data.login.length <= 255) && (data.password.length  <= 255)) {\r\n            let formData = new FormData();\r\n            formData.append(\"method\", \"login\");\r\n            formData.append(\"data\", JSON.stringify({\r\n                \"login\": data.login,\r\n                \"password\": data.password\r\n            }));\r\n            axios.post(\"http://dream\", formData)\r\n            .then(res => {\r\n                if (res.data.success) {\r\n                    this.changeText(\"\");\r\n                    this.setAuth(true);\r\n                    Cookies.set(\"data\", JSON.stringify({\r\n                        token: res.data.token\r\n                    }),{\r\n                        expires: new Date(new Date().getTime() + 15778476000)\r\n                    });\r\n                    (this.props.history || this.props.props.history).push({\r\n                        pathname: '/lk',\r\n                        state: {\r\n                            auth: this.state.auth\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    this.changeText(res.data.message);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                this.changeText(\"Произошла ошибка при подключении к серверу\");\r\n            });\r\n        }\r\n    };\r\n    handleRegister = async e => { // на костылях\r\n        e.preventDefault();\r\n        let data = {\r\n            fio: document.getElementById(\"Name\").value,\r\n            login: document.getElementById(\"Login\").value,\r\n            password: document.getElementById(\"Password\").value\r\n        }\r\n        if (data.fio !== '' && (data.login === '' || data.password === '')) {\r\n            this.setState({regData: {name: data.fio}});\r\n            request(\"isNewUserByFio\", {fio: data.fio}).then(res => {\r\n                if (res.success) {\r\n                    document.getElementById(\"Name\").style.display = \"none\";\r\n                    document.getElementById(\"Login\").style.display = \"block\";\r\n                    document.getElementById(\"Password\").style.display = \"block\";\r\n                }\r\n            });\r\n        } else if (data.login !== '' && data.password !== '') {\r\n            request(\"register\", {fio: this.state.regData.name, login: data.login, password: data.password}).then(res => {\r\n                if (res.success) {\r\n                    this.setAuth(true);\r\n                    Cookies.set(\"data\", JSON.stringify({\r\n                        token: res.data.token\r\n                    }),{\r\n                        expires: new Date(new Date().getTime() + 15778476000)\r\n                    });\r\n                    (this.props.history || this.props.props.history).push({\r\n                        pathname: '/lk',\r\n                        state: {\r\n                            auth: this.state.auth\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.changeText(res.data.message);\r\n                    document.getElementById(\"Name\").style.display = \"block\";\r\n                    document.getElementById(\"Login\").style.display = \"none\";\r\n                    document.getElementById(\"Password\").style.display = \"none\";\r\n                }\r\n            });\r\n        }\r\n    };\r\n    render() {\r\n        let authBlock;\r\n        if (this.state.currAction) {\r\n            authBlock =\r\n            <div className=\"login-data\">\r\n                <input id=\"LoginInput\" type=\"email\" placeholder=\"Логин\" onChange={this.handleAdd} maxLength=\"255\"></input>\r\n                <input id=\"PasswordInput\" type=\"password\" placeholder=\"Пароль\" onChange={this.handleAdd} maxLength=\"255\"></input>\r\n                <button id=\"Submit\" onClick={this.handleSubmit}>Войти</button>\r\n            </div>\r\n        } else {\r\n            authBlock =\r\n            <div id=\"regBlock\" className=\"login-data\">\r\n                <input id=\"Name\" type=\"text\" placeholder=\"ФИО\" maxLength=\"255\"></input>\r\n                <input id=\"Login\" type=\"email\" placeholder=\"Логин\" maxLength=\"255\"></input>\r\n                <input id=\"Password\" type=\"password\" placeholder=\"Пароль\" maxLength=\"255\"></input>\r\n                <button onClick={ this.handleRegister}>Далее</button>\r\n            </div>\r\n        }\r\n        return (\r\n            <>\r\n                <header className=\"auth-header\">\r\n                    <ul className=\"main-ul\">\r\n                        <li id=\"Logo\"><img src=\"Sources/images/logo.png\" alt=\"\"/></li>\r\n                        <li id=\"Auth\">\r\n                            <p className=\"button button-login\" onClick={() => this.setState({ currAction: true }) }>Войти</p>\r\n                            <p className=\"button button-register\" onClick={() => this.setState({ currAction: false }) }>Регистрация</p>\r\n                            <div className=\"selection-shadow\"></div>\r\n                        </li>\r\n                    </ul>\r\n                </header>\r\n                <div id=\"Authorization\">\r\n                    <div className=\"Form\">\r\n                        <svg width=\"64\" height=\"78\" viewBox=\"0 0 64 78\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M32 0H52C58.6274 0 64 5.37258 64 12V51.76C64 55.9458 61.8189 59.8291 58.2444 62.0073L38.2444 74.1948C34.4095 76.5317 29.5905 76.5317 25.7556 74.1948L5.75557 62.0073C2.18114 59.8291 0 55.9458 0 51.76V12C0 5.37258 5.37258 0 12 0H32Z\" fill=\"#2c2c34\"></path>\r\n                            <path d=\"M31.9963 37.7037C26.9645 37.7037 22.6665 38.4971 22.6665 41.6704C22.6665 44.8449 26.9377 45.6662 31.9963 45.6662C37.0282 45.6662 41.3262 44.8741 41.3262 41.6996C41.3262 38.5251 37.0562 37.7037 31.9963 37.7037Z\" fill=\"#FAFAFA\"></path>\r\n                            <path opacity=\"0.7\" d=\"M31.9963 34.681C35.4239 34.681 38.1703 31.9335 38.1703 28.507C38.1703 25.0805 35.4239 22.333 31.9963 22.333C28.5698 22.333 25.8223 25.0805 25.8223 28.507C25.8223 31.9335 28.5698 34.681 31.9963 34.681Z\" fill=\"#FAFAFA\"></path>\r\n                        </svg>\r\n                        <p id=\"TextLogin\">{this.state.loginText}</p>\r\n                        {authBlock}\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    };\r\n}; \r\n\r\nexport default Authorization;"]},"metadata":{},"sourceType":"module"}