{"ast":null,"code":"import _classCallCheck from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Files/Projects/- WEB/TravelersDream/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import Cookies from'js-cookie';import{request,uploadFiles,getToken}from'./requests';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LK=/*#__PURE__*/function(_Component){_inherits(LK,_Component);var _super=_createSuper(LK);function LK(props){var _this;_classCallCheck(this,LK);_this=_super.call(this,props);_this.handleOutsideClick=function(event){if(_this.box&&_this.box.current!==null&&!_this.box.current.contains(event.target)){if(window.getComputedStyle(document.getElementById(\"UserHeaderMore\")).getPropertyValue(\"visibility\")==='visible')document.getElementById(\"UserHeaderMore\").style.visibility='hidden';}};_this.state={username:\"\",type:\"\",picture:\"\",blocks:[],types:[],currentUser:{action:\"\",id:0,originalData:{}}};_this.box=/*#__PURE__*/React.createRef();_this.getUserInfo();_this.getEmployees();_this.getTypes();return _this;}_createClass(LK,[{key:\"getUserInfo\",value:function getUserInfo(){var _this2=this;request(\"getUserInfo\",{token:getToken(),keys:[\"name\",\"type\",\"photo\"]}).then(function(res){if(res.success&&!res.error){_this2.setState({username:res.data.data.name,type:res.data.data.type,picture:res.data.data.photo});}else{_this2.logOut();}});}},{key:\"getEmployees\",value:function getEmployees(){var _this3=this;request(\"getEmployees\",{\"token\":getToken()}).then(function(res){if(res.success&&!res.error){var __blocks=[];res.data.data.users.map(function(user){__blocks.push(/*#__PURE__*/_jsxs(\"div\",{className:\"not-enought\",onClick:function onClick(){_this3.showCreatePanel('update',user.id,user.name,user.fio,user.bdate,user.typeid-1,user.photo);_this3.state.currentUser.action=\"update\";},children:[/*#__PURE__*/_jsx(\"img\",{className:\"user-picture\",src:user.photo,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info-nt\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"user-name user-text\",children:user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"user-type user-text\",children:user.type})]})]}));});_this3.setState({blocks:__blocks});}});}},{key:\"getTypes\",value:function getTypes(){var _this4=this;request(\"getTypes\",{\"token\":getToken()}).then(function(res){if(res.success&&!res.error){var __types=[];var counter=0;res.data.data.types.map(function(type){__types.push(/*#__PURE__*/_jsx(\"option\",{value:counter,children:type}));counter+=1;});_this4.setState({types:__types});}else{//this.logOut();\n}});}},{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener('click',this.handleOutsideClick);}},{key:\"showMore\",value:function showMore(){if(window.getComputedStyle(document.getElementById(\"UserHeaderMore\")).getPropertyValue(\"visibility\")==='hidden')document.getElementById(\"UserHeaderMore\").style.visibility='visible';else document.getElementById(\"UserHeaderMore\").style.visibility='hidden';}},{key:\"logOut\",value:function logOut(){Cookies.remove('data',{path:'',domain:'localhost'});this.props.props.history.push({pathname:'/auth'});}},{key:\"mib\",value:function mib(){document.getElementById(\"LKMIB\").style.visibility=\"hidden\";document.getElementById(\"LKMIB-CNew\").style.animation=\"hideToDown 0.3s\";document.getElementById(\"LKMIB-CNew\").style.visibility=\"hidden\";document.getElementById(\"LKMIB-CNew\").style.opacity=\"0\";}},{key:\"showCreatePanel\",value:function showCreatePanel(panelType){var id=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var name=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"\";var fio=arguments.length>3&&arguments[3]!==undefined?arguments[3]:\"\";var bdate=arguments.length>4&&arguments[4]!==undefined?arguments[4]:\"\";var type=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var photo=arguments.length>6&&arguments[6]!==undefined?arguments[6]:\"http://dream/profilepictures/0.png\";this.setState({currentUser:{action:panelType,id:id,originalData:{name:name,fio:fio,bdate:bdate,type:type,photo:photo}}});document.getElementById(\"CNewTitle\").textContent=panelType==='create'?'Создание':name;document.getElementById(\"inputName\").value=name;document.getElementById(\"inputFIO\").value=fio;document.getElementById(\"inputBDate\").value=bdate;document.getElementById(\"selectType\").value=type;document.getElementById(\"imageInput\").src=photo;document.getElementById(\"LKMIB\").style.visibility=\"visible\";document.getElementById(\"LKMIB\").style.opacity=\"1\";document.getElementById(\"LKMIB-CNew\").style.animation=\"showFromUp 0.3s\";document.getElementById(\"LKMIB-CNew\").style.visibility=\"visible\";document.getElementById(\"LKMIB-CNew\").style.opacity=\"1\";}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"main-ul\",children:[/*#__PURE__*/_jsx(\"li\",{id:\"Logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"Sources/images/logo.png\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"li\",{id:\"UserHeader\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-header-main\",id:\"UserHeaderMain\",ref:this.box,onClick:function onClick(){return _this5.showMore();},children:[/*#__PURE__*/_jsx(\"p\",{className:\"user-name\",children:this.state.username}),/*#__PURE__*/_jsx(\"img\",{className:\"user-picture\",src:this.state.picture,alt:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-header-more\",id:\"UserHeaderMore\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"button-profile\",children:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"a\",{className:\"button-logout\",onClick:function onClick(){return _this5.logOut();},children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"selection-shadow\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"LK\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"control-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gr-list\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0421\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0410\\u0433\\u0435\\u043D\\u0442\\u044B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-of\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"button-create\",onClick:function onClick(){_this5.showCreatePanel(\"create\");_this5.state.currentUser.action=\"create\";},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"}),this.state.blocks]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"LKMIB\",className:\"mib\",onClick:function onClick(){return _this5.mib();}}),/*#__PURE__*/_jsxs(\"div\",{id:\"LKMIB-CNew\",className:\"create-new\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title-block\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"CNewTitle\",className:\"title-name\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"title-close\",viewBox:\"0 0 20 20\",onClick:function onClick(){return _this5.mib();},children:/*#__PURE__*/_jsx(\"path\",{fill:\"white\",d:\"M15.898,4.045c-0.271-0.272-0.713-0.272-0.986,0l-4.71,4.711L5.493,4.045c-0.272-0.272-0.714-0.272-0.986,0s-0.272,0.714,0,0.986l4.709,4.711l-4.71,4.711c-0.272,0.271-0.272,0.713,0,0.986c0.136,0.136,0.314,0.203,0.492,0.203c0.179,0,0.357-0.067,0.493-0.203l4.711-4.711l4.71,4.711c0.137,0.136,0.314,0.203,0.494,0.203c0.178,0,0.355-0.067,0.492-0.203c0.273-0.273,0.273-0.715,0-0.986l-4.711-4.711l4.711-4.711C16.172,4.759,16.172,4.317,15.898,4.045z\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-input\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-name input-row\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{id:\"inputName\",type:\"text\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-fio input-row\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0424\\u0418\\u041E\"}),/*#__PURE__*/_jsx(\"input\",{id:\"inputFIO\",type:\"text\",onChange:function onChange(e){var fio=e.target.value.split(\" \");document.getElementById(\"inputName\").value=(fio[0]?fio[0]:\"\")+(fio[1]?\" \".concat(fio[1][0],\".\"):\"\")+(fio[2]?\" \".concat(fio[2][0],\".\"):\"\");}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-date input-row\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{id:\"inputBDate\",type:\"date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-type input-row\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u0438\\u043F\"}),/*#__PURE__*/_jsx(\"select\",{id:\"selectType\",children:this.state.types})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-save\",onClick:function onClick(){var query={};var currentData={name:document.getElementById(\"inputName\").value,fio:document.getElementById(\"inputFIO\").value,bdate:document.getElementById(\"inputBDate\").value,type:+document.getElementById(\"selectType\").value+1,photo:_this5.state.currentUser.photo};console.log(_this5.state.currentUser.action);if(_this5.state.currentUser.action==\"update\"){var originalData=_this5.state.currentUser.originalData;Object.keys(originalData).map(function(key){if(currentData[key]!=originalData[key]&&key!==\"photo\")query[key]=currentData[key];});uploadFiles(\"updateUserInfo\",{token:getToken(),id:_this5.state.currentUser.id,keys:query},[currentData.photo?currentData.photo:undefined]).then(function(res){_this5.getUserInfo();_this5.getEmployees();_this5.getTypes();_this5.showCreatePanel(currentData.name,currentData.id,currentData.name,currentData.fio,currentData.bdate,currentData.type-1,_this5.state.currentUser.photo?window.URL.createObjectURL(currentData.photo):originalData.photo);});}else if(_this5.state.currentUser.action==\"create\"){var _originalData=_this5.state.currentUser.originalData;Object.keys(_originalData).map(function(key){if(currentData[key]!=_originalData[key]&&key!==\"photo\")query[key]=currentData[key];});uploadFiles(\"createUser\",{token:getToken(),keys:query},[currentData.photo?currentData.photo:undefined]).then(function(res){_this5.getUserInfo();_this5.getEmployees();_this5.getTypes();_this5.showCreatePanel(currentData.name,currentData.id,currentData.name,currentData.fio,currentData.bdate,currentData.type-1,_this5.state.currentUser.photo?window.URL.createObjectURL(currentData.photo):_originalData.photo);});}},children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-input-block\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"image-title\",children:\"\\u0424\\u043E\\u0442\\u043E\"}),/*#__PURE__*/_jsx(\"input\",{id:\"imageInput\",className:\"image-input\",type:\"image\",onClick:function onClick(){return document.getElementById(\"fileInput\").click();}}),/*#__PURE__*/_jsx(\"input\",{id:\"fileInput\",type:\"file\",accept:\"image/*\",onChange:function onChange(e){_this5.state.currentUser.photo=e.target.files[0];document.getElementById(\"imageInput\").src=window.URL.createObjectURL(e.target.files[0]);}})]})]})]})]})]});}}]);return LK;}(Component);/* document.getElementById(\"imageInput\").src=\"http://dream/profilepictures/1.png\"\r\n<li id=\"UserHeader\">\r\n                        <ul className=\"user-header-ul\">\r\n                            <li className=\"user-name\"><p>{this.state.username}</p></li>\r\n                            <li className=\"user-picture\"><img src=\"https://randus.org/photos/w/c793b9797c7d3810.jpg\" alt=\"\" /></li>\r\n                        </ul>\r\n                        <a className=\"button button-logout\" onClick={() => this.logOut() }>Выйти</a>\r\n                        <div className=\"selection-shadow\"></div>\r\n                    </li> */ //onClick={this.setState({ currAction: false })}\nexport default LK;","map":{"version":3,"sources":["D:/Files/Projects/- WEB/TravelersDream/front/src/Components/lk.js"],"names":["React","Component","axios","Cookies","request","uploadFiles","getToken","LK","props","handleOutsideClick","event","box","current","contains","target","window","getComputedStyle","document","getElementById","getPropertyValue","style","visibility","state","username","type","picture","blocks","types","currentUser","action","id","originalData","createRef","getUserInfo","getEmployees","getTypes","token","keys","then","res","success","error","setState","data","name","photo","logOut","__blocks","users","map","user","push","showCreatePanel","fio","bdate","typeid","__types","counter","addEventListener","remove","path","domain","history","pathname","animation","opacity","panelType","textContent","value","src","showMore","mib","e","split","query","currentData","console","log","Object","key","undefined","URL","createObjectURL","click","files"],"mappings":"4nBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAAQC,OAAR,CAAiBC,WAAjB,CAA8BC,QAA9B,KAA6C,YAA7C,C,gJAEMC,CAAAA,E,wFACF,YAAYC,KAAZ,CAAmB,oCACf,uBAAMA,KAAN,EADe,MAiFnBC,kBAjFmB,CAiFE,SAACC,KAAD,CAAW,CAC5B,GAAI,MAAKC,GAAL,EAAY,MAAKA,GAAL,CAASC,OAAT,GAAqB,IAAjC,EAAyC,CAAC,MAAKD,GAAL,CAASC,OAAT,CAAiBC,QAAjB,CAA0BH,KAAK,CAACI,MAAhC,CAA9C,CAAuF,CACnF,GAAIC,MAAM,CAACC,gBAAP,CAAwBC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAxB,EAAmEC,gBAAnE,CAAoF,YAApF,IAAsG,SAA1G,CACIF,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CE,KAA1C,CAAgDC,UAAhD,CAA6D,QAA7D,CACP,CACJ,CAtFkB,CAEf,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAE,EADD,CAETC,IAAI,CAAE,EAFG,CAGTC,OAAO,CAAE,EAHA,CAITC,MAAM,CAAE,EAJC,CAKTC,KAAK,CAAE,EALE,CAMTC,WAAW,CAAE,CACTC,MAAM,CAAE,EADC,CAETC,EAAE,CAAE,CAFK,CAGTC,YAAY,CAAE,EAHL,CANJ,CAAb,CAYA,MAAKpB,GAAL,cAAWX,KAAK,CAACgC,SAAN,EAAX,CACA,MAAKC,WAAL,GACA,MAAKC,YAAL,GACA,MAAKC,QAAL,GAjBe,aAkBlB,C,0CAED,sBAAc,iBACV/B,OAAO,CAAC,aAAD,CAAgB,CACnBgC,KAAK,CAAE9B,QAAQ,EADI,CAEnB+B,IAAI,CAAE,CAAC,MAAD,CAAS,MAAT,CAAiB,OAAjB,CAFa,CAAhB,CAAP,CAGGC,IAHH,CAGQ,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,OAAJ,EAAe,CAACD,GAAG,CAACE,KAAxB,CAA+B,CAC3B,MAAI,CAACC,QAAL,CAAc,CACVnB,QAAQ,CAAEgB,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAcC,IADd,CAEVpB,IAAI,CAAEe,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAcnB,IAFV,CAGVC,OAAO,CAAEc,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAcE,KAHb,CAAd,EAKH,CAND,IAOK,CACD,MAAI,CAACC,MAAL,GACH,CACJ,CAdD,EAeH,C,4BACD,uBAAe,iBACX1C,OAAO,CAAC,cAAD,CAAiB,CACpB,QAASE,QAAQ,EADG,CAAjB,CAAP,CAEEgC,IAFF,CAEO,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,OAAJ,EAAe,CAACD,GAAG,CAACE,KAAxB,CAA+B,CAC3B,GAAIM,CAAAA,QAAQ,CAAG,EAAf,CACAR,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAcK,KAAd,CAAoBC,GAApB,CAAwB,SAAAC,IAAI,CAAI,CAC5BH,QAAQ,CAACI,IAAT,cACI,aAAK,SAAS,CAAC,aAAf,CAA6B,OAAO,CAAG,kBAAM,CACxC,MAAI,CAACC,eAAL,CAAqB,QAArB,CAA+BF,IAAI,CAACpB,EAApC,CAAwCoB,IAAI,CAACN,IAA7C,CAAmDM,IAAI,CAACG,GAAxD,CAA6DH,IAAI,CAACI,KAAlE,CAAyEJ,IAAI,CAACK,MAAL,CAAc,CAAvF,CAA0FL,IAAI,CAACL,KAA/F,EACA,MAAI,CAACvB,KAAL,CAAWM,WAAX,CAAuBC,MAAvB,CAAgC,QAAhC,CACH,CAHF,wBAII,YAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAEqB,IAAI,CAACL,KAAxC,CAA+C,GAAG,CAAC,EAAnD,EAJJ,cAKI,aAAK,SAAS,CAAC,cAAf,wBACI,UAAG,SAAS,CAAC,qBAAb,UAAoCK,IAAI,CAACN,IAAzC,EADJ,cAEI,UAAG,SAAS,CAAC,qBAAb,UAAoCM,IAAI,CAAC1B,IAAzC,EAFJ,GALJ,GADJ,EAYH,CAbD,EAcA,MAAI,CAACkB,QAAL,CAAc,CAAChB,MAAM,CAAEqB,QAAT,CAAd,EACH,CACJ,CArBA,EAsBH,C,wBACD,mBAAW,iBACP3C,OAAO,CAAC,UAAD,CAAa,CAChB,QAASE,QAAQ,EADD,CAAb,CAAP,CAEGgC,IAFH,CAEQ,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,OAAJ,EAAe,CAACD,GAAG,CAACE,KAAxB,CAA+B,CAC3B,GAAIe,CAAAA,OAAO,CAAE,EAAb,CACA,GAAIC,CAAAA,OAAO,CAAG,CAAd,CACAlB,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAchB,KAAd,CAAoBsB,GAApB,CAAwB,SAAAzB,IAAI,CAAI,CAC5BgC,OAAO,CAACL,IAAR,cAAa,eAAQ,KAAK,CAAEM,OAAf,UAAyBjC,IAAzB,EAAb,EACAiC,OAAO,EAAI,CAAX,CACH,CAHD,EAIA,MAAI,CAACf,QAAL,CAAc,CAACf,KAAK,CAAE6B,OAAR,CAAd,EACH,CARD,IASK,CACD;AACH,CACJ,CAfD,EAgBH,C,iCAED,4BAAoB,CAAEvC,QAAQ,CAACyC,gBAAT,CAA0B,OAA1B,CAAmC,KAAKjD,kBAAxC,EAA8D,C,wBAOpF,mBAAW,CACP,GAAIM,MAAM,CAACC,gBAAP,CAAwBC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAxB,EAAmEC,gBAAnE,CAAoF,YAApF,IAAsG,QAA1G,CACIF,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CE,KAA1C,CAAgDC,UAAhD,CAA6D,SAA7D,CADJ,IAGIJ,CAAAA,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CE,KAA1C,CAAgDC,UAAhD,CAA6D,QAA7D,CACP,C,sBACD,iBAAS,CACLlB,OAAO,CAACwD,MAAR,CAAe,MAAf,CAAuB,CAAEC,IAAI,CAAE,EAAR,CAAYC,MAAM,CAAE,WAApB,CAAvB,EACA,KAAKrD,KAAL,CAAWA,KAAX,CAAiBsD,OAAjB,CAAyBX,IAAzB,CAA8B,CAC1BY,QAAQ,CAAE,OADgB,CAA9B,EAGH,C,mBACD,cAAM,CACF9C,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCE,KAAjC,CAAuCC,UAAvC,CAAoD,QAApD,CACAJ,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCE,KAAtC,CAA4C4C,SAA5C,CAAwD,iBAAxD,CACA/C,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCE,KAAtC,CAA4CC,UAA5C,CAAyD,QAAzD,CACAJ,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCE,KAAtC,CAA4C6C,OAA5C,CAAsD,GAAtD,CACH,C,+BACD,yBAAgBC,SAAhB,CAAgH,IAArFpC,CAAAA,EAAqF,2DAAlF,CAAkF,IAA/Ec,CAAAA,IAA+E,2DAA1E,EAA0E,IAAtES,CAAAA,GAAsE,2DAAlE,EAAkE,IAA9DC,CAAAA,KAA8D,2DAAxD,EAAwD,IAApD9B,CAAAA,IAAoD,2DAA/C,CAA+C,IAA5CqB,CAAAA,KAA4C,2DAAtC,oCAAsC,CAC5G,KAAKH,QAAL,CAAc,CAACd,WAAW,CAAE,CACxBC,MAAM,CAAEqC,SADgB,CAExBpC,EAAE,CAAEA,EAFoB,CAGxBC,YAAY,CAAE,CACVa,IAAI,CAAEA,IADI,CAEVS,GAAG,CAAEA,GAFK,CAGVC,KAAK,CAAEA,KAHG,CAIV9B,IAAI,CAAEA,IAJI,CAKVqB,KAAK,CAAEA,KALG,CAHU,CAAd,CAAd,EAWA5B,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCiD,WAArC,CAAmDD,SAAS,GAAK,QAAd,CAAyB,UAAzB,CAAsCtB,IAAzF,CACA3B,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCkD,KAArC,CAA6CxB,IAA7C,CACA3B,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCkD,KAApC,CAA4Cf,GAA5C,CACApC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCkD,KAAtC,CAA8Cd,KAA9C,CACArC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCkD,KAAtC,CAA8C5C,IAA9C,CACAP,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCmD,GAAtC,CAA4CxB,KAA5C,CAEA5B,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCE,KAAjC,CAAuCC,UAAvC,CAAoD,SAApD,CACAJ,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCE,KAAjC,CAAuC6C,OAAvC,CAAiD,GAAjD,CACAhD,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCE,KAAtC,CAA4C4C,SAA5C,CAAwD,iBAAxD,CACA/C,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCE,KAAtC,CAA4CC,UAA5C,CAAyD,SAAzD,CACAJ,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCE,KAAtC,CAA4C6C,OAA5C,CAAsD,GAAtD,CACH,C,sBAED,iBAAS,iBACL,mBACA,wCACI,qCACI,YAAI,SAAS,CAAC,SAAd,wBACI,WAAI,EAAE,CAAC,MAAP,uBAAc,YAAK,GAAG,CAAC,yBAAT,CAAmC,GAAG,CAAC,EAAvC,EAAd,EADJ,cAEI,YAAI,EAAE,CAAC,YAAP,wBACI,aAAK,SAAS,CAAC,kBAAf,CAAkC,EAAE,CAAC,gBAArC,CAAsD,GAAG,CAAE,KAAKtD,GAAhE,CAAqE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC2D,QAAL,EAAN,EAA9E,wBACI,UAAG,SAAS,CAAC,WAAb,UAA0B,KAAKhD,KAAL,CAAWC,QAArC,EADJ,cAEI,YAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAE,KAAKD,KAAL,CAAWG,OAA9C,CAAuD,GAAG,CAAC,EAA3D,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,kBAAf,CAAkC,EAAE,CAAC,gBAArC,wBACI,UAAG,SAAS,CAAC,gBAAb,wDADJ,cAEI,UAAG,SAAS,CAAC,eAAb,CAA6B,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACqB,MAAL,EAAN,EAAtC,4CAFJ,GALJ,cASI,YAAK,SAAS,CAAC,kBAAf,EATJ,GAFJ,GADJ,EADJ,cAiBI,aAAK,EAAE,CAAC,IAAR,wBACI,aAAK,SAAS,CAAC,eAAf,wBACI,aAAK,SAAS,CAAC,SAAf,wBACI,mFADJ,cAEI,iEAFJ,cAGI,2DAHJ,GADJ,cAMI,aAAK,SAAS,CAAC,SAAf,wBACI,UAAG,SAAS,CAAC,eAAb,CAA6B,OAAO,CAAG,kBAAM,CACzC,MAAI,CAACM,eAAL,CAAqB,QAArB,EACA,MAAI,CAAC9B,KAAL,CAAWM,WAAX,CAAuBC,MAAvB,CAAgC,QAAhC,CACC,CAHL,wDADJ,CAKK,KAAKP,KAAL,CAAWI,MALhB,GANJ,GADJ,cAeI,YAAK,EAAE,CAAC,OAAR,CAAgB,SAAS,CAAC,KAA1B,CAAgC,OAAO,CAAG,yBAAM,CAAA,MAAI,CAAC6C,GAAL,EAAN,EAA1C,EAfJ,cAgBI,aAAK,EAAE,CAAC,YAAR,CAAqB,SAAS,CAAC,YAA/B,wBACI,aAAK,SAAS,CAAC,aAAf,wBACI,UAAG,EAAE,CAAC,WAAN,CAAkB,SAAS,CAAC,YAA5B,EADJ,cAEI,YAAK,SAAS,CAAC,aAAf,CAA6B,OAAO,CAAC,WAArC,CAAiD,OAAO,CAAG,yBAAM,CAAA,MAAI,CAACA,GAAL,EAAN,EAA3D,uBACjB,aAAM,IAAI,CAAC,OAAX,CAAmB,CAAC,CAAC,ubAArB,EADiB,EAFJ,GADJ,cAOI,aAAK,SAAS,CAAC,aAAf,wBACI,aAAK,SAAS,CAAC,YAAf,wBACI,aAAK,SAAS,CAAC,sBAAf,wBACI,yCADJ,cAEI,cAAO,EAAE,CAAC,WAAV,CAAsB,IAAI,CAAC,MAA3B,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,qBAAf,wBACI,yCADJ,cAEI,cAAO,EAAE,CAAC,UAAV,CAAqB,IAAI,CAAC,MAA1B,CAAiC,QAAQ,CAAE,kBAACC,CAAD,CAAO,CAC9C,GAAInB,CAAAA,GAAG,CAAGmB,CAAC,CAAC1D,MAAF,CAASsD,KAAT,CAAeK,KAAf,CAAqB,GAArB,CAAV,CACAxD,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCkD,KAArC,CAA6C,CAACf,GAAG,CAAC,CAAD,CAAH,CAASA,GAAG,CAAC,CAAD,CAAZ,CAAkB,EAAnB,GACxCA,GAAG,CAAC,CAAD,CAAH,YAAcA,GAAG,CAAC,CAAD,CAAH,CAAO,CAAP,CAAd,MAA6B,EADW,GAExCA,GAAG,CAAC,CAAD,CAAH,YAAaA,GAAG,CAAC,CAAD,CAAH,CAAO,CAAP,CAAb,MAA4B,EAFY,CAA7C,CAGH,CALD,EAFJ,GALJ,cAcI,aAAK,SAAS,CAAC,sBAAf,wBACI,gGADJ,cAEI,cAAO,EAAE,CAAC,YAAV,CAAuB,IAAI,CAAC,MAA5B,EAFJ,GAdJ,cAkBI,aAAK,SAAS,CAAC,sBAAf,wBACI,yCADJ,cAEI,eAAQ,EAAE,CAAC,YAAX,UACK,KAAK/B,KAAL,CAAWK,KADhB,EAFJ,GAlBJ,cAwBI,eAAQ,SAAS,CAAC,aAAlB,CAAgC,OAAO,CAAE,kBAAM,CAC3C,GAAI+C,CAAAA,KAAK,CAAG,EAAZ,CACA,GAAIC,CAAAA,WAAW,CAAG,CACd/B,IAAI,CAAE3B,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCkD,KAD7B,CAEdf,GAAG,CAAEpC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCkD,KAF3B,CAGdd,KAAK,CAAErC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCkD,KAH/B,CAId5C,IAAI,CAAE,CAACP,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCkD,KAAvC,CAA+C,CAJvC,CAKdvB,KAAK,CAAE,MAAI,CAACvB,KAAL,CAAWM,WAAX,CAAuBiB,KALhB,CAAlB,CAOA+B,OAAO,CAACC,GAAR,CAAY,MAAI,CAACvD,KAAL,CAAWM,WAAX,CAAuBC,MAAnC,EACA,GAAI,MAAI,CAACP,KAAL,CAAWM,WAAX,CAAuBC,MAAvB,EAAiC,QAArC,CAA+C,CAC3C,GAAIE,CAAAA,YAAY,CAAG,MAAI,CAACT,KAAL,CAAWM,WAAX,CAAuBG,YAA1C,CACA+C,MAAM,CAACzC,IAAP,CAAYN,YAAZ,EAA0BkB,GAA1B,CAA8B,SAAA8B,GAAG,CAAI,CACjC,GAAIJ,WAAW,CAACI,GAAD,CAAX,EAAoBhD,YAAY,CAACgD,GAAD,CAAhC,EAAyCA,GAAG,GAAK,OAArD,CAA8DL,KAAK,CAACK,GAAD,CAAL,CAAaJ,WAAW,CAACI,GAAD,CAAxB,CACjE,CAFD,EAGA1E,WAAW,CAAC,gBAAD,CAAmB,CAAC+B,KAAK,CAAE9B,QAAQ,EAAhB,CAAoBwB,EAAE,CAAE,MAAI,CAACR,KAAL,CAAWM,WAAX,CAAuBE,EAA/C,CAAmDO,IAAI,CAAEqC,KAAzD,CAAnB,CAAoF,CAACC,WAAW,CAAC9B,KAAZ,CAAoB8B,WAAW,CAAC9B,KAAhC,CAAwCmC,SAAzC,CAApF,CAAX,CAAoJ1C,IAApJ,CAA0J,SAAAC,GAAG,CAAI,CAC7J,MAAI,CAACN,WAAL,GACA,MAAI,CAACC,YAAL,GACA,MAAI,CAACC,QAAL,GACA,MAAI,CAACiB,eAAL,CAAqBuB,WAAW,CAAC/B,IAAjC,CAAuC+B,WAAW,CAAC7C,EAAnD,CAAuD6C,WAAW,CAAC/B,IAAnE,CAAyE+B,WAAW,CAACtB,GAArF,CAA0FsB,WAAW,CAACrB,KAAtG,CAA6GqB,WAAW,CAACnD,IAAZ,CAAmB,CAAhI,CAAmI,MAAI,CAACF,KAAL,CAAWM,WAAX,CAAuBiB,KAAvB,CAA+B9B,MAAM,CAACkE,GAAP,CAAWC,eAAX,CAA2BP,WAAW,CAAC9B,KAAvC,CAA/B,CAA+Ed,YAAY,CAACc,KAA/N,EACH,CALD,EAMH,CAXD,IAWO,IAAI,MAAI,CAACvB,KAAL,CAAWM,WAAX,CAAuBC,MAAvB,EAAiC,QAArC,CAA+C,CAClD,GAAIE,CAAAA,aAAY,CAAG,MAAI,CAACT,KAAL,CAAWM,WAAX,CAAuBG,YAA1C,CACA+C,MAAM,CAACzC,IAAP,CAAYN,aAAZ,EAA0BkB,GAA1B,CAA8B,SAAA8B,GAAG,CAAI,CACjC,GAAIJ,WAAW,CAACI,GAAD,CAAX,EAAoBhD,aAAY,CAACgD,GAAD,CAAhC,EAAyCA,GAAG,GAAK,OAArD,CAA8DL,KAAK,CAACK,GAAD,CAAL,CAAaJ,WAAW,CAACI,GAAD,CAAxB,CACjE,CAFD,EAGA1E,WAAW,CAAC,YAAD,CAAe,CAAC+B,KAAK,CAAE9B,QAAQ,EAAhB,CAAoB+B,IAAI,CAAEqC,KAA1B,CAAf,CAAiD,CAACC,WAAW,CAAC9B,KAAZ,CAAoB8B,WAAW,CAAC9B,KAAhC,CAAwCmC,SAAzC,CAAjD,CAAX,CAAiH1C,IAAjH,CAAuH,SAAAC,GAAG,CAAI,CAC1H,MAAI,CAACN,WAAL,GACA,MAAI,CAACC,YAAL,GACA,MAAI,CAACC,QAAL,GACA,MAAI,CAACiB,eAAL,CAAqBuB,WAAW,CAAC/B,IAAjC,CAAuC+B,WAAW,CAAC7C,EAAnD,CAAuD6C,WAAW,CAAC/B,IAAnE,CAAyE+B,WAAW,CAACtB,GAArF,CAA0FsB,WAAW,CAACrB,KAAtG,CAA6GqB,WAAW,CAACnD,IAAZ,CAAmB,CAAhI,CAAmI,MAAI,CAACF,KAAL,CAAWM,WAAX,CAAuBiB,KAAvB,CAA+B9B,MAAM,CAACkE,GAAP,CAAWC,eAAX,CAA2BP,WAAW,CAAC9B,KAAvC,CAA/B,CAA+Ed,aAAY,CAACc,KAA/N,EACH,CALD,EAMH,CACJ,CAjCD,oEAxBJ,GADJ,cA4DI,aAAK,SAAS,CAAC,mBAAf,wBACI,UAAG,SAAS,CAAC,aAAb,sCADJ,cAEI,cAAO,EAAE,CAAC,YAAV,CAAuB,SAAS,CAAC,aAAjC,CAA+C,IAAI,CAAC,OAApD,CAA4D,OAAO,CAAG,yBAAM5B,CAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCiE,KAArC,EAAN,EAAtE,EAFJ,cAGI,cAAO,EAAE,CAAC,WAAV,CAAsB,IAAI,CAAC,MAA3B,CAAkC,MAAM,CAAC,SAAzC,CAAmD,QAAQ,CAAG,kBAACX,CAAD,CAAO,CACjE,MAAI,CAAClD,KAAL,CAAWM,WAAX,CAAuBiB,KAAvB,CAA+B2B,CAAC,CAAC1D,MAAF,CAASsE,KAAT,CAAe,CAAf,CAA/B,CACAnE,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCmD,GAAtC,CAA4CtD,MAAM,CAACkE,GAAP,CAAWC,eAAX,CAA2BV,CAAC,CAAC1D,MAAF,CAASsE,KAAT,CAAe,CAAf,CAA3B,CAA5C,CACH,CAHD,EAHJ,GA5DJ,GAPJ,GAhBJ,GAjBJ,GADA,CAkHH,C,gBAvPYnF,S,EAyPjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4B,CACA;AACA,cAAeM,CAAAA,EAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {request, uploadFiles, getToken} from './requests';\r\n\r\nclass LK extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            type: \"\",\r\n            picture: \"\",\r\n            blocks: [],\r\n            types: [],\r\n            currentUser: {\r\n                action: \"\",\r\n                id: 0,\r\n                originalData: {},\r\n            }\r\n        };\r\n        this.box = React.createRef();\r\n        this.getUserInfo();\r\n        this.getEmployees();\r\n        this.getTypes();\r\n    };\r\n\r\n    getUserInfo() {\r\n        request(\"getUserInfo\", {\r\n            token: getToken(),\r\n            keys: [\"name\", \"type\", \"photo\"]\r\n        }).then(res => {\r\n            if (res.success && !res.error) {\r\n                this.setState({\r\n                    username: res.data.data.name,\r\n                    type: res.data.data.type,\r\n                    picture: res.data.data.photo\r\n                });\r\n            }\r\n            else {\r\n                this.logOut();\r\n            }\r\n        });\r\n    }\r\n    getEmployees() {\r\n        request(\"getEmployees\", {\r\n            \"token\": getToken() \r\n       }).then(res => {\r\n           if (res.success && !res.error) {\r\n               let __blocks = [];\r\n               res.data.data.users.map(user => {\r\n                   __blocks.push(\r\n                       <div className=\"not-enought\" onClick={ () => {\r\n                            this.showCreatePanel('update', user.id, user.name, user.fio, user.bdate, user.typeid - 1, user.photo);\r\n                            this.state.currentUser.action = \"update\";\r\n                        }}>\r\n                           <img className=\"user-picture\" src={user.photo} alt=\"\" />\r\n                           <div className=\"user-info-nt\">\r\n                               <p className=\"user-name user-text\">{user.name}</p>\r\n                               <p className=\"user-type user-text\">{user.type}</p>\r\n                           </div>\r\n                       </div>\r\n                   );\r\n               });\r\n               this.setState({blocks: __blocks});\r\n           }\r\n       });\r\n    }\r\n    getTypes() {\r\n        request(\"getTypes\", {\r\n            \"token\": getToken()\r\n        }).then(res => {\r\n            if (res.success && !res.error) {\r\n                let __types= [];\r\n                let counter = 0;\r\n                res.data.data.types.map(type => {\r\n                    __types.push(<option value={counter}>{type}</option>);\r\n                    counter += 1;\r\n                });\r\n                this.setState({types: __types});\r\n            }\r\n            else {\r\n                //this.logOut();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentDidMount() { document.addEventListener('click', this.handleOutsideClick); }\r\n    handleOutsideClick = (event) => {\r\n        if (this.box && this.box.current !== null && !this.box.current.contains(event.target)) {\r\n            if (window.getComputedStyle(document.getElementById(\"UserHeaderMore\")).getPropertyValue(\"visibility\") === 'visible')\r\n                document.getElementById(\"UserHeaderMore\").style.visibility = 'hidden';\r\n        }\r\n    }\r\n    showMore() {\r\n        if (window.getComputedStyle(document.getElementById(\"UserHeaderMore\")).getPropertyValue(\"visibility\") === 'hidden')\r\n            document.getElementById(\"UserHeaderMore\").style.visibility = 'visible';\r\n        else\r\n            document.getElementById(\"UserHeaderMore\").style.visibility = 'hidden';\r\n    };\r\n    logOut() {\r\n        Cookies.remove('data', { path: '', domain: 'localhost' });\r\n        this.props.props.history.push({\r\n            pathname: '/auth'\r\n        })\r\n    };\r\n    mib() {\r\n        document.getElementById(\"LKMIB\").style.visibility = \"hidden\";\r\n        document.getElementById(\"LKMIB-CNew\").style.animation = \"hideToDown 0.3s\";\r\n        document.getElementById(\"LKMIB-CNew\").style.visibility = \"hidden\";\r\n        document.getElementById(\"LKMIB-CNew\").style.opacity = \"0\";\r\n    };\r\n    showCreatePanel(panelType, id=0, name=\"\", fio=\"\", bdate=\"\", type=0, photo=\"http://dream/profilepictures/0.png\") {\r\n        this.setState({currentUser: {\r\n            action: panelType, \r\n            id: id,\r\n            originalData: {\r\n                name: name,\r\n                fio: fio,\r\n                bdate: bdate,\r\n                type: type,\r\n                photo: photo\r\n            }\r\n        }});\r\n        document.getElementById(\"CNewTitle\").textContent = panelType === 'create' ? 'Создание' : name;\r\n        document.getElementById(\"inputName\").value = name;\r\n        document.getElementById(\"inputFIO\").value = fio;\r\n        document.getElementById(\"inputBDate\").value = bdate;\r\n        document.getElementById(\"selectType\").value = type;\r\n        document.getElementById(\"imageInput\").src = photo;\r\n\r\n        document.getElementById(\"LKMIB\").style.visibility = \"visible\";\r\n        document.getElementById(\"LKMIB\").style.opacity = \"1\";\r\n        document.getElementById(\"LKMIB-CNew\").style.animation = \"showFromUp 0.3s\";\r\n        document.getElementById(\"LKMIB-CNew\").style.visibility = \"visible\";\r\n        document.getElementById(\"LKMIB-CNew\").style.opacity = \"1\";\r\n    };\r\n\r\n    render() {\r\n        return (\r\n        <>\r\n            <header>\r\n                <ul className=\"main-ul\">\r\n                    <li id=\"Logo\"><img src=\"Sources/images/logo.png\" alt=\"\"/></li>\r\n                    <li id=\"UserHeader\">\r\n                        <div className=\"user-header-main\" id=\"UserHeaderMain\" ref={this.box} onClick={() => this.showMore() }>\r\n                            <p className=\"user-name\">{this.state.username}</p>\r\n                            <img className=\"user-picture\" src={this.state.picture} alt=\"\" />\r\n                        </div>\r\n                        <div className=\"user-header-more\" id=\"UserHeaderMore\">\r\n                            <a className=\"button-profile\" >Профиль</a>\r\n                            <a className=\"button-logout\" onClick={() => this.logOut() }>Выйти</a>\r\n                        </div>\r\n                        <div className=\"selection-shadow\"></div>\r\n                    </li>\r\n                </ul>\r\n            </header>\r\n            <div id=\"LK\">\r\n                <div className=\"control-panel\">\r\n                    <div className=\"gr-list\">\r\n                        <p>Сотрудники</p>\r\n                        <p>Клиенты</p>\r\n                        <p>Агенты</p>\r\n                    </div>\r\n                    <div className=\"list-of\">\r\n                        <p className=\"button-create\" onClick={ () => {\r\n                            this.showCreatePanel(\"create\");\r\n                            this.state.currentUser.action = \"create\";\r\n                            }}>Создать</p>\r\n                        {this.state.blocks}\r\n                    </div>\r\n                </div>\r\n                <div id=\"LKMIB\" className=\"mib\" onClick={ () => this.mib() }/>\r\n                <div id=\"LKMIB-CNew\" className=\"create-new\">\r\n                    <div className=\"title-block\">\r\n                        <p id=\"CNewTitle\" className=\"title-name\" />\r\n                        <svg className=\"title-close\" viewBox=\"0 0 20 20\" onClick={ () => this.mib() }>\r\n\t\t\t\t\t\t\t<path fill=\"white\" d=\"M15.898,4.045c-0.271-0.272-0.713-0.272-0.986,0l-4.71,4.711L5.493,4.045c-0.272-0.272-0.714-0.272-0.986,0s-0.272,0.714,0,0.986l4.709,4.711l-4.71,4.711c-0.272,0.271-0.272,0.713,0,0.986c0.136,0.136,0.314,0.203,0.492,0.203c0.179,0,0.357-0.067,0.493-0.203l4.711-4.711l4.71,4.711c0.137,0.136,0.314,0.203,0.494,0.203c0.178,0,0.355-0.067,0.492-0.203c0.273-0.273,0.273-0.715,0-0.986l-4.711-4.711l4.711-4.711C16.172,4.759,16.172,4.317,15.898,4.045z\"></path>\r\n\t\t\t\t\t\t</svg>\r\n                        </div>\r\n                    <div className=\"input-block\">\r\n                        <div className=\"text-input\">\r\n                            <div className=\"input-name input-row\">\r\n                                <p>Имя</p>\r\n                                <input id=\"inputName\" type=\"text\" />\r\n                            </div>\r\n                            <div className=\"input-fio input-row\">\r\n                                <p>ФИО</p>\r\n                                <input id=\"inputFIO\" type=\"text\" onChange={(e) => {\r\n                                    let fio = e.target.value.split(\" \");\r\n                                    document.getElementById(\"inputName\").value = (fio[0] ? fio[0] : \"\") + \r\n                                        (fio[1] ?  ` ${fio[1][0]}.` : \"\") + \r\n                                        (fio[2] ? ` ${fio[2][0]}.` : \"\");\r\n                                }}/>\r\n                            </div>\r\n                            <div className=\"input-date input-row\">\r\n                                <p>Дата рождения</p>\r\n                                <input id=\"inputBDate\" type=\"date\" />\r\n                            </div>\r\n                            <div className=\"input-type input-row\">\r\n                                <p>Тип</p>\r\n                                <select id=\"selectType\">\r\n                                    {this.state.types}\r\n                                </select>\r\n                            </div>\r\n                            <button className=\"button-save\" onClick={() => {\r\n                                let query = {};\r\n                                let currentData = {\r\n                                    name: document.getElementById(\"inputName\").value,\r\n                                    fio: document.getElementById(\"inputFIO\").value,\r\n                                    bdate: document.getElementById(\"inputBDate\").value,\r\n                                    type: +document.getElementById(\"selectType\").value + 1,\r\n                                    photo: this.state.currentUser.photo\r\n                                };\r\n                                console.log(this.state.currentUser.action);\r\n                                if (this.state.currentUser.action == \"update\") {\r\n                                    let originalData = this.state.currentUser.originalData;\r\n                                    Object.keys(originalData).map(key => {\r\n                                        if (currentData[key] != originalData[key] && key !== \"photo\") query[key] = currentData[key];\r\n                                    });\r\n                                    uploadFiles(\"updateUserInfo\", {token: getToken(), id: this.state.currentUser.id, keys: query}, [currentData.photo ? currentData.photo : undefined]).then( res => {\r\n                                        this.getUserInfo();\r\n                                        this.getEmployees();\r\n                                        this.getTypes();\r\n                                        this.showCreatePanel(currentData.name, currentData.id, currentData.name, currentData.fio, currentData.bdate, currentData.type - 1, this.state.currentUser.photo ? window.URL.createObjectURL(currentData.photo) : originalData.photo);\r\n                                    });\r\n                                } else if (this.state.currentUser.action == \"create\") {\r\n                                    let originalData = this.state.currentUser.originalData;\r\n                                    Object.keys(originalData).map(key => {\r\n                                        if (currentData[key] != originalData[key] && key !== \"photo\") query[key] = currentData[key];\r\n                                    });\r\n                                    uploadFiles(\"createUser\", {token: getToken(), keys: query}, [currentData.photo ? currentData.photo : undefined]).then( res => {\r\n                                        this.getUserInfo();\r\n                                        this.getEmployees();\r\n                                        this.getTypes();\r\n                                        this.showCreatePanel(currentData.name, currentData.id, currentData.name, currentData.fio, currentData.bdate, currentData.type - 1, this.state.currentUser.photo ? window.URL.createObjectURL(currentData.photo) : originalData.photo);\r\n                                    });\r\n                                }\r\n                            }}>Сохранить</button>\r\n                        </div>\r\n                        <div className=\"image-input-block\">\r\n                            <p className=\"image-title\">Фото</p>\r\n                            <input id=\"imageInput\" className=\"image-input\" type=\"image\" onClick={ () => document.getElementById(\"fileInput\").click() }/>\r\n                            <input id=\"fileInput\" type=\"file\" accept=\"image/*\" onChange={ (e) => {\r\n                                this.state.currentUser.photo = e.target.files[0];\r\n                                document.getElementById(\"imageInput\").src = window.URL.createObjectURL(e.target.files[0]);\r\n                            }} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n        );\r\n    };\r\n}\r\n/* document.getElementById(\"imageInput\").src=\"http://dream/profilepictures/1.png\"\r\n<li id=\"UserHeader\">\r\n                        <ul className=\"user-header-ul\">\r\n                            <li className=\"user-name\"><p>{this.state.username}</p></li>\r\n                            <li className=\"user-picture\"><img src=\"https://randus.org/photos/w/c793b9797c7d3810.jpg\" alt=\"\" /></li>\r\n                        </ul>\r\n                        <a className=\"button button-logout\" onClick={() => this.logOut() }>Выйти</a>\r\n                        <div className=\"selection-shadow\"></div>\r\n                    </li> */\r\n//onClick={this.setState({ currAction: false })}\r\nexport default LK;"]},"metadata":{},"sourceType":"module"}